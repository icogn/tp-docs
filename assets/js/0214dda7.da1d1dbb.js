"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3170],{3905:(t,e,a)=>{a.d(e,{Zo:()=>m,kt:()=>c});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),d=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=d(t.components);return n.createElement(s.Provider,{value:e},t.children)},h="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},p=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,m=o(t,["components","mdxType","originalType","parentName"]),h=d(a),p=r,c=h["".concat(s,".").concat(p)]||h[p]||u[p]||l;return a?n.createElement(c,i(i({ref:e},m),{},{components:a})):n.createElement(c,i({ref:e},m))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=p;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o[h]="string"==typeof t?t:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},6221:(t,e,a)=>{a.d(e,{Z:()=>M});var n=a(7294),r=a(6010);const l=40500000n,i=40500n,o=86400n,s=730485n,d=-1840700269n,m=-2004318071n,h=-1282606671n,u=1374389535n,p=[0,31,59,90,120,151,181,212,243,273,304,334],c=[0,31,60,91,121,152,182,213,244,274,305,335];function k(t){const e=BigInt("0x"+t),a={},n=e%l;let r=8n*n/324n;r%=1000n,a.microseconds=Number(r);let k=n/i;k%=1000n,a.milliseconds=Number(k);const g=(e-n)/l;!function(t,e){const a=t+6n,n=a-7n*(a+(d*a>>0x20n)>>2n);e.dayOfWeek=Number(n);const r=t*h>>0x20n,l=t+r;let i,o=l>>8n,s=365n*o;for(;;){let e;if(o>=1n){const t=(o-1n)*u>>0x20n;e=(o+3n>>2n)-(t>>5n)+(t>>7n)}else e=0n;if(i=s+e,i<=t)break;o-=1n,s-=365n}const m=Number(t-i);e.year=Number(o),e.dayOfYear=m;let k=!0,g=!1;if(4n*(o>>2n)===o){100n*(o*u>>0x20n>>5n)!==o&&(g=!0)}if(!g){400n*(o*u>>0x20n>>7n)!==o&&(k=!1)}let f;f=k?c:p;let b=12;for(;;){b-=1;if(m>=f[b])break}e.month=b;const y=f[b],N=m-y+1;e.day=N}(g/o+s,a);const f=g%o,b=f+(m*f>>0x20n)>>5n,y=b+(m*b>>0x20n)>>5n,N=60n*y;a.hours=Number(y);const w=60n*b,v=b-N;a.minutes=Number(v);const x=f-w;return a.seconds=Number(x),a}const g="outputText_F4so",f="error_nwlf",b="dateFormat_HHIs",y="swapButton_KciG",N=40500000n,w=86400n,v=3600n,x=60n,C=0x7fffffffffffffffn,A=1374389535n,T=/^(\d{4})\/(\d{2})\/(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,D=/^(\d{4})\/(\d{2})\/(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.?)(\d{0,6})$/,B=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I={1:"st",2:"nd",3:"rd"};function S(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function F(t){return S(t,2)}function E(t,e){if(e){t=(BigInt("0x"+t)*N).toString(16)}const{year:a,month:n,day:r,hours:l,minutes:i,seconds:o,milliseconds:s,microseconds:d,dayOfWeek:m,dayOfYear:h}=k(t),u=e?"":`.${S(s,3)}${S(d,3)}`;return`${a}/${F(n+1)}/${F(r)} ${F(l)}:${F(i)}:${F(o)}${u} (${B[m]})\nThis is the ${function(t){const e=String(t+1),a=e.charAt(e.length-1);return e+(I[a]||"th")}(h)} day of the year.`}const O=[0,31,59,90,120,151,181,212,243,273,304,334],P=[0,31,60,91,121,152,182,213,244,274,305,335];function W(t){let{year:e,month:a,day:n,hours:r,minutes:l,seconds:i,fractionalSeconds:o}=t,s=0n;return s+=function(t){let e;if((t-=2000n)>=1n){const a=(t-1n)*A>>0x20n;e=(t+3n>>2n)-(a>>5n)+(a>>7n)}else e=0n;return(365n*t+e)*w*N}(e),s+=function(t,e,a){let n,r=!0,l=!1;4n*(t>>2n)===t&&100n*(t*A>>0x20n>>5n)!==t&&(l=!0);l||400n*(t*A>>0x20n>>7n)!==t&&(r=!1);return n=r?P:O,(BigInt(n[e])+a-1n)*w*N}(e,a,n),s+=r*v*N,s+=l*x*N,s+=i*N,s+=324n*o/8n,s>C?-1n:s}function G(t,e){if("string"!=typeof t||t.length<1)return{ignore:!0};let a,n,r,l,i,o,s=0n;if(e){const e=t.match(T);if(!e)return{error:"Input does not match the format: YYYY/MM/DD hh:mm:ss"};a=BigInt(e[1]),n=BigInt(e[2])-1n,r=BigInt(e[3]),l=BigInt(e[4]),i=BigInt(e[5]),o=BigInt(e[6])}else{const e=t.match(D);if(!e||0===e[7].length&&e[8].length>0)return{error:"Input does not match the format: YYYY/MM/DD hh:mm:ss.ssssss"};a=BigInt(e[1]),n=BigInt(e[2])-1n,r=BigInt(e[3]),l=BigInt(e[4]),i=BigInt(e[5]),o=BigInt(e[6]),s=BigInt(function(t,e){for(t=String(t);t.length<e;)t+="0";return t}(e[8],6))}if(a<2000n)return{error:"Minimum year is 2000."};if(n<0||n>11)return{error:"Month must be between 01 and 12."};if(r<1)return{error:"Day must be at least 01."};if(l>=24)return{error:"Hours must be between 00 and 23"};if(i>=60)return{error:"Minutes must be between 00 and 59"};if(o>=60)return{error:"Minutes must be between 00 and 59"};let d=W({year:a,month:n,day:r,hours:l,minutes:i,seconds:o,fractionalSeconds:s});return d<0?{error:"Pick an earlier time."}:e&&(d/=N,d>0xffffffffn)?{error:"Max time is 2136/02/07 06:28:15"}:{val:S(d.toString(16),e?8:16),error:""}}function L(t,e){return t?e?20:40:e?19:26}const M=function(t){let{sourceName:e,useSeconds:a}=t;const l=(0,n.useRef)(null),[i,o]=(0,n.useState)(!0),[s,d]=(0,n.useState)(""),[m,h]=(0,n.useState)(!1);return n.createElement("div",null,n.createElement("div",null,e?function(t,e){return e?`${t} to Time Converter`:`Time to ${t} Converter`}(e,i):"TimestampConverter"),n.createElement("input",{maxLength:L(i,a),ref:l}),n.createElement("button",{onClick:function(){if(l.current)if(i){const{val:t,error:e,ignore:n}=function(t,e){let a=t.replaceAll(/\s/g,"");if(0===a.toLowerCase().indexOf("0x")&&(a=a.substring(2)),a.length<1)return{ignore:!0};if(e&&a.length>8)return{error:"Expected 8 hex digits."};if(!/^[0-9a-f]*$/gi.test(a))return{error:"Invalid characters."};if(!e){if(a.length>16)return{error:"Expected 16 hex digits."};if(16===a.length&&/^[89a-f]/i.test(a))return{error:"Input must be positive."}}return{val:a,error:""}}(l.current.value,a);h(Boolean(e)),n?d(""):e?d(e):t&&t.length>0?d(E(t,a)):d("")}else{const{val:t,error:e,ignore:n}=G(l.current.value,a);h(Boolean(e)),n?d(""):e?d(e):t&&t.length>0?d(t):d("")}}},"Convert"),!i&&n.createElement("div",{className:b},"YYYY/MM/DD hh:mm:ss"+(a?"":"[.s] (Up to 6 digits after seconds)")),n.createElement("div",{className:(0,r.Z)({[g]:!0,[f]:m}),style:{display:s?void 0:"none"}},s),n.createElement("button",{className:y,onClick:()=>{l.current&&(l.current.value=""),d(""),o(!i)}},"Swap"))}},3621:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>d,toc:()=>h});var n=a(7462),r=(a(7294),a(3905)),l=a(9960),i=a(6221);const o={},s="Memory Card",d={unversionedId:"save-file/memory-card",id:"save-file/memory-card",title:"Memory Card",description:"Here we discuss the Twilight Princess save file structure on the memory card at a high level.",source:"@site/docs/save-file/memory-card.mdx",sourceDirName:"save-file",slug:"/save-file/memory-card",permalink:"/tp-docs/docs/save-file/memory-card",draft:!1,editUrl:"https://github.com/icogn/tp-docs/edit/main/website/docs/save-file/memory-card.mdx",tags:[],version:"current",frontMatter:{},sidebar:"saveFile",previous:{title:"Save File Introduction",permalink:"/tp-docs/docs/save-file/save-file-introduction"},next:{title:"Introduction",permalink:"/tp-docs/docs/save-file/quest-log/introduction"}},m={},h=[{value:"Overview",id:"overview",level:2},{value:"Blocks",id:"blocks",level:3},{value:"DirectoryEntry",id:"directoryentry",level:3},{value:"Twilight Princess Save Data",id:"twilight-princess-save-data",level:3},{value:"Blocks",id:"blocks-1",level:2},{value:"Header Blocks",id:"header-blocks",level:3},{value:"Banner",id:"banner",level:4},{value:"Icons",id:"icons",level:4},{value:"Comments 1 and 2",id:"comments-1-and-2",level:4},{value:"Unused/Garbage",id:"unusedgarbage",level:4},{value:"Other garbage",id:"other-garbage",level:4},{value:"Quest Log Blocks",id:"quest-log-blocks",level:3},{value:"First 8 Bytes",id:"first-8-bytes",level:4},{value:"Quest Log Data",id:"quest-log-data",level:4},{value:"Unused/Garbage",id:"unusedgarbage-1",level:4},{value:"Checksum",id:"checksum",level:4},{value:"DirectoryEntry",id:"directoryentry-1",level:2},{value:"gameCode",id:"gamecode",level:3},{value:"publisherCode",id:"publishercode",level:3},{value:"padding_06",id:"padding_06",level:3},{value:"imageFlags",id:"imageflags",level:3},{value:"filename",id:"filename",level:3},{value:"lastModified",id:"lastmodified",level:3},{value:"imageDataOffset",id:"imagedataoffset",level:3},{value:"iconFormats",id:"iconformats",level:3},{value:"iconAnimationSpeeds",id:"iconanimationspeeds",level:3},{value:"permissions",id:"permissions",level:3},{value:"copyCounter",id:"copycounter",level:3},{value:"firstBlockIndex",id:"firstblockindex",level:3},{value:"numBlocks",id:"numblocks",level:3},{value:"padding_38",id:"padding_38",level:3},{value:"commentsOffset",id:"commentsoffset",level:3},{value:"DirectoryEntry Follow-up",id:"directoryentry-follow-up",level:2},{value:"Why is the padding 0xff?",id:"why-0xff",level:3},{value:"Thoughts on lastModified",id:"thoughts-on-lastmodified",level:3},{value:"CheckCardStat",id:"checkcardstat",level:3},{value:"Room for custom data?",id:"room-for-custom-data",level:3},{value:"gameCode, publisherCode, filename",id:"gamecode-publishercode-filename",level:4},{value:"imageFlags",id:"imageflags-1",level:4},{value:"lastModified",id:"lastmodified-1",level:4},{value:"permissions",id:"permissions-1",level:4},{value:"copyCounter",id:"copycounter-1",level:4},{value:"firstBlockIndex, numBlocks",id:"firstblockindex-numblocks",level:4},{value:"Summary",id:"summary",level:4},{value:"Other Formats",id:"other-formats",level:2},{value:"GCIs",id:"gcis",level:3},{value:"Wii",id:"wii",level:3},{value:"Nvidia Shield",id:"nvidia-shield",level:3},{value:"Closing Thoughts",id:"closing-thoughts",level:2},{value:"Why 5 identical icons?",id:"why-5-identical-icons",level:3},{value:"Default selection on the file select screen?",id:"default-selection-on-the-file-select-screen",level:3},{value:"Naming",id:"naming",level:2},{value:"General",id:"general",level:3},{value:"DirectoryEntry",id:"directoryentry-2",level:3},{value:"References",id:"references",level:2}],u={toc:h};function p(t){let{components:e,...o}=t;return(0,r.kt)("wrapper",(0,n.Z)({},u,o,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"memory-card"},"Memory Card"),(0,r.kt)("p",null,"Here we discuss the Twilight Princess save file structure on the memory card at a high level.\nIf you are interested in things like rupees and poe souls, please see the ",(0,r.kt)(l.Z,{to:"/docs/save-file/quest-log/introduction",mdxType:"Link"},"Quest Log"),"."),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("h3",{id:"blocks"},"Blocks"),(0,r.kt)("p",null,'You can think of a memory card as a filesystem. Each file on the memory card is composed of a number of "blocks", and each block is 0x2000 bytes long.'),(0,r.kt)("p",null,"The first 5 blocks of a memory card are used to manage the filesystem:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Offset"),(0,r.kt)("th",{parentName:"tr",align:null},"Size"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x0000"),(0,r.kt)("td",{parentName:"tr",align:null},"0x2000"),(0,r.kt)("td",{parentName:"tr",align:null},"Header")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x2000"),(0,r.kt)("td",{parentName:"tr",align:null},"0x2000"),(0,r.kt)("td",{parentName:"tr",align:null},"Directory")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x4000"),(0,r.kt)("td",{parentName:"tr",align:null},"0x2000"),(0,r.kt)("td",{parentName:"tr",align:null},"Directory (backup)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x6000"),(0,r.kt)("td",{parentName:"tr",align:null},"0x2000"),(0,r.kt)("td",{parentName:"tr",align:null},"Block Allocation Map")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x8000"),(0,r.kt)("td",{parentName:"tr",align:null},"0x2000"),(0,r.kt)("td",{parentName:"tr",align:null},"Block Allocation Map (backup)")))),(0,r.kt)("p",null,"A file on a memory card will consist of a certain number of blocks which are located somewhere after the first 5 filesystem blocks."),(0,r.kt)("p",null,"For example, TP's save data is 4 blocks long, so these blocks might be located at offsets 0xa000, 0xc000, 0xe000, and 0x10000 on a fresh memory card, but they could also be at 0x22000, 0x24000, 0x26000, and 0x28000."),(0,r.kt)("p",null,"The blocks do not have to be contiguous, so the save data could also be in the blocks at offsets 0x36000, 0x20000, 0x28000, and 0x44000, but it is fine to think of them as contiguous in most cases."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The official memory card types are Memory Card 59, Memory Card 251, and Memory Card 1019. Do you notice a pattern?",(0,r.kt)("br",null),"\n64 - 5 is 59, 256 - 5 is 251, and 1024 - 5 is 1019.")),(0,r.kt)("h3",{id:"directoryentry"},"DirectoryEntry"),(0,r.kt)("p",null,"The Directory blocks contain a list of entries which are each 0x40 bytes long. Each of these entries is referred to as a DirectoryEntry."),(0,r.kt)("p",null,"A DirectoryEntry contains metadata about a file on the memory card. Each DirectoryEntry points to one file, and each file is pointed to by one DirectoryEntry."),(0,r.kt)("h3",{id:"twilight-princess-save-data"},"Twilight Princess Save Data"),(0,r.kt)("p",null,"The Twilight Princess data on the memory card is a combination of a save file (which is 4 blocks long) and its metadata (a DirectoryEntry)."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Size"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x40"),(0,r.kt)("td",{parentName:"tr",align:null},"DirectoryEntry")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x8000"),(0,r.kt)("td",{parentName:"tr",align:null},"4 Blocks")))),(0,r.kt)("p",null,"Note that a GCI file is exactly these two things back-to-back as shown above."),(0,r.kt)("h2",{id:"blocks-1"},"Blocks"),(0,r.kt)("p",null,"TP save data is composed of 4 blocks which are each 0x2000 bytes long:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"BlockNo"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Header")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"Header (continued)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Quest Log Data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Quest Log Data (backup)")))),(0,r.kt)("h3",{id:"header-blocks"},"Header Blocks"),(0,r.kt)("p",null,"The Header continues into the second block, so those two blocks will be treated as a chunk of 0x4000 bytes for discussion purposes. Remember that the two blocks may not actually be back-to-back on the memory card."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Offset"),(0,r.kt)("th",{parentName:"tr",align:"right"},"Size"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x0000"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0xc00"),(0,r.kt)("td",{parentName:"tr",align:null},"Banner pixel data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x0c00"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x200"),(0,r.kt)("td",{parentName:"tr",align:null},"Banner palette data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x0e00"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x400"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon pixel data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1200"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x400"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon pixel data (copy)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1600"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x400"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon pixel data (copy)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1a00"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x400"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon pixel data (copy)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1e00"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x400"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon pixel data (copy)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x2200"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x200"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon palette data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x2400"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x20"),(0,r.kt)("td",{parentName:"tr",align:null},"Comment 1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x2420"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x20"),(0,r.kt)("td",{parentName:"tr",align:null},"Comment 2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x2440"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1bc0"),(0,r.kt)("td",{parentName:"tr",align:null},"Unused/garbage")))),(0,r.kt)("h4",{id:"banner"},"Banner"),(0,r.kt)("img",{src:a(5449).Z,alt:"zelda2_gc_banner.bti"}),(0,r.kt)("p",null,"A file on the memory card can have a banner. The banner always has dimensions 0x60 by 0x20 pixels (96 x 32 decimal)."),(0,r.kt)("p",null,"TP's banner is in CI8 format (indicated in the DirectoryEntry) which means it uses one byte per pixel. 0x60 width ","*"," 0x20 height gives 0xc00 pixels total. At one byte per pixel, TP's banner is 0xc00 bytes long."),(0,r.kt)("p",null,"If a banner is in CI8 format, the 0x200 bytes following the pixel data are allocated to store its palette data. Each palette entry is 2 bytes, meaning a CI8 banner can use up to 0x100 unique palette entries. Each byte in the pixel data has a value between 0x00 and 0xff which is an offset to an entry in the palette data."),(0,r.kt)("p",null,"Note that TP's banner only makes use of the first 0x160 bytes of the palette data space."),(0,r.kt)("h4",{id:"icons"},"Icons"),(0,r.kt)("img",{src:a(9224).Z,alt:"zelda2_gc_banner.bti"}),(0,r.kt)("p",null,"A file on the memory card can have between 0 and 8 icons. An icon always has dimensions 0x20 by 0x20 pixels (32 x 32 decimal). Multiple icons can be used to create an animated icon."),(0,r.kt)("p",null,"TP specifies in its DirectoryEntry that it has 5 icons and that each icon is in CI8 format with a shared color palette following all of the pixel data. CI8 format means each pixel takes one byte. Each icon has dimensions 0x20 by 0x20, so each icon is 0x400 bytes long."),(0,r.kt)("p",null,"As with the banner, the icon palette data must fit in the 0x200 bytes following the end of the pixel data. For its icons, TP makes use of the full 0x200 bytes of palette data."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The zelda2_gc_banner.bti and zelda2_gc_icon.bti are located in the Yaz0-encoded ",(0,r.kt)("inlineCode",{parentName:"p"},"/res/CardIcon/cardicon.arc"),'. "Card" here is short for Memory Card.')),(0,r.kt)("admonition",{title:"Fun Fact",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The banner and icon both have a single semi-transparent pixel (most likely mistakes).\nIf position x:0,y:0 is the top left pixel of the image, then the banner has this pixel at x:12,y:30, and the icon has it at x:2,y:1.")),(0,r.kt)("h4",{id:"comments-1-and-2"},"Comments 1 and 2"),(0,r.kt)("p",null,"Each comment is a null-terminated string which can use up to 0x20 bytes."),(0,r.kt)("p",null,"The comments (in addition to the banner and icon) are visible when managing memory card data on your GameCube."),(0,r.kt)("p",null,'For the US GameCube version of TP, the first comment is always "Zelda: Twilight Princess", and the second comment is something like "6/26 Save Data" (which is Month/Day).'),(0,r.kt)("p",null,"Below is an image which shows the banner, icon, and comments in the Gamecube IPL."),(0,r.kt)("img",{src:a(3987).Z,alt:"zelda2_gc_banner.bti"}),(0,r.kt)("h4",{id:"unusedgarbage"},"Unused/Garbage"),(0,r.kt)("p",null,"The last 0x1bc0 of Block 2 is not used for anything."),(0,r.kt)("p",null,"If you inspect memory card data for TP in a hex editor, you may see what appears to be quest log data in this space. This is a side effect of using a shared buffer for writing blocks to the memory card. The buffer is not ",(0,r.kt)("inlineCode",{parentName:"p"},"memset")," with zeroes before constructing the Header blocks like it is before copying in Quest Log blocks."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The buffer is zeroed out when you load the game."),(0,r.kt)("li",{parentName:"ul"},"If you tell the game to create a save file on the memory card, the buffer becomes dirty afterward."),(0,r.kt)("li",{parentName:"ul"},"When data is restored from the memory card for the file select screen, the buffer becomes dirty.")),(0,r.kt)("p",null,"This means the only time you can save before the buffer becomes dirty is when you tell the game to create new Twilight Princess data on the memory card."),(0,r.kt)("h4",{id:"other-garbage"},"Other garbage"),(0,r.kt)("p",null,"Other bytes which may contain garbage in the first two blocks are as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The last 0x40 bytes of the banner's palette data (starting at offset 0xd60)"),(0,r.kt)("li",{parentName:"ul"},"In each comment (offsets 0x2400 and 0x2420), the bytes which follow the null termination character of the comment")),(0,r.kt)("h3",{id:"quest-log-blocks"},"Quest Log Blocks"),(0,r.kt)("p",null,"Block 3 contains the data for the 3 Quest Logs, which are the 3 files you pick between on the file select screen. Block 4 is a backup copy of block 3, so its data will normally match block 3's exactly (assuming nothing unexpected happened during any memory card writes)."),(0,r.kt)("p",null,"The Quest Log block structure is as follows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Offset"),(0,r.kt)("th",{parentName:"tr",align:"right"},"Size"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x0000"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x8"),(0,r.kt)("td",{parentName:"tr",align:null},"00000000 00000006")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x0008"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0xa94"),(0,r.kt)("td",{parentName:"tr",align:null},"Quest Log 1 Data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x0a9c"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0xa94"),(0,r.kt)("td",{parentName:"tr",align:null},"Quest Log 2 Data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1530"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0xa94"),(0,r.kt)("td",{parentName:"tr",align:null},"Quest Log 3 Data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1fc4"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x38"),(0,r.kt)("td",{parentName:"tr",align:null},"Unused/garbage")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x1ffc"),(0,r.kt)("td",{parentName:"tr",align:"right"},"0x4"),(0,r.kt)("td",{parentName:"tr",align:null},"Checksum")))),(0,r.kt)("h4",{id:"first-8-bytes"},"First 8 Bytes"),(0,r.kt)("p",null,"The first eight bytes are always set to:",(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"00 00 00 00 00 00 00 06")),(0,r.kt)("p",null,"My guess is that this is a version number for the quest log structure which was incremented during development, and they ended on 6."),(0,r.kt)("h4",{id:"quest-log-data"},"Quest Log Data"),(0,r.kt)("p",null,"Each Quest Log's data has the same structure. The structure is rather complex, so it is covered separately."),(0,r.kt)("h4",{id:"unusedgarbage-1"},"Unused/Garbage"),(0,r.kt)("p",null,"Note that each of the 0xa94 Quest Log Data sections contain unused/garbage bytes as well, but that is covered separately."),(0,r.kt)("h4",{id:"checksum"},"Checksum"),(0,r.kt)("p",null,"The checksum function runs over the first 0x1ffc bytes of the Quest Log block. The generated checksum is 4 bytes long, and it is stored as the final 4 bytes of a Quest Log block."),(0,r.kt)("p",null,"Here is the algorithm written in JavaScript:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function questLogBlockChecksum(arrBuf, offset, len) {\n  const view = new DataView(arrBuf);\n  let sum = 0;\n  let negSum = 0;\n\n  let index = offset;\n  const iterations = len >> 1;\n  for (let i = 0; i < iterations; i++) {\n    const val = view.getUint16(index);\n    sum += val;\n    negSum += ~val;\n    negSum &= 0xffff;\n    index += 2;\n  }\n  return ((sum << 0x10) & 0xffff0000) + negSum;\n}\n")),(0,r.kt)("h2",{id:"directoryentry-1"},"DirectoryEntry"),(0,r.kt)("p",null,"These 0x40 bytes contain metadata about the Twilight Princess save data on the memory card. They live in a Directory block, hence the name. These are also the first 0x40 bytes of a GCI file."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Offset"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x00"),(0,r.kt)("td",{parentName:"tr",align:null},"u8","[4]"),(0,r.kt)("td",{parentName:"tr",align:null},"gameCode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x04"),(0,r.kt)("td",{parentName:"tr",align:null},"u8","[2]"),(0,r.kt)("td",{parentName:"tr",align:null},"publisherCode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x06"),(0,r.kt)("td",{parentName:"tr",align:null},"u8"),(0,r.kt)("td",{parentName:"tr",align:null},"padding_06")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x07"),(0,r.kt)("td",{parentName:"tr",align:null},"u8"),(0,r.kt)("td",{parentName:"tr",align:null},"imageFlags")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x08"),(0,r.kt)("td",{parentName:"tr",align:null},"u8","[0x20]"),(0,r.kt)("td",{parentName:"tr",align:null},"filename")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x28"),(0,r.kt)("td",{parentName:"tr",align:null},"u32"),(0,r.kt)("td",{parentName:"tr",align:null},"lastModified")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x2c"),(0,r.kt)("td",{parentName:"tr",align:null},"u32"),(0,r.kt)("td",{parentName:"tr",align:null},"imageDataOffset")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x30"),(0,r.kt)("td",{parentName:"tr",align:null},"u16"),(0,r.kt)("td",{parentName:"tr",align:null},"iconFormats")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x32"),(0,r.kt)("td",{parentName:"tr",align:null},"u16"),(0,r.kt)("td",{parentName:"tr",align:null},"iconAnimationSpeeds")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x34"),(0,r.kt)("td",{parentName:"tr",align:null},"u8"),(0,r.kt)("td",{parentName:"tr",align:null},"permissions")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x35"),(0,r.kt)("td",{parentName:"tr",align:null},"u8"),(0,r.kt)("td",{parentName:"tr",align:null},"copyCounter")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x36"),(0,r.kt)("td",{parentName:"tr",align:null},"u16"),(0,r.kt)("td",{parentName:"tr",align:null},"firstBlockIndex")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x38"),(0,r.kt)("td",{parentName:"tr",align:null},"u16"),(0,r.kt)("td",{parentName:"tr",align:null},"numBlocks")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x3a"),(0,r.kt)("td",{parentName:"tr",align:null},"u8","[2]"),(0,r.kt)("td",{parentName:"tr",align:null},"padding_38")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"0x3c"),(0,r.kt)("td",{parentName:"tr",align:null},"u32"),(0,r.kt)("td",{parentName:"tr",align:null},"commentsOffset")))),(0,r.kt)("h3",{id:"gamecode"},"gameCode"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"gameCode")," will be one of the following depending on the game region:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"gameCode"),(0,r.kt)("th",{parentName:"tr",align:null},"Region"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"GZ2E"),(0,r.kt)("td",{parentName:"tr",align:null},"USA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"GZ2J"),(0,r.kt)("td",{parentName:"tr",align:null},"Japan")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"GZ2P"),(0,r.kt)("td",{parentName:"tr",align:null},"Europe and other PAL regions such as Australia")))),(0,r.kt)("p",null,"G is for Gamecube, Z2 is the title code for Twilight Princess, and the last character is dependent on the region as shown above.",(0,r.kt)("br",null),"\nRead more about it here: ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.dolphin-emu.org/index.php?title=GameIDs"},"GameIDs - Dolphin Emulator Wiki")),(0,r.kt)("p",null,"These bytes are available at address 0x80000000 which is where they are copied from when creating the DirectoryEntry."),(0,r.kt)("h3",{id:"publishercode"},"publisherCode"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"publisherCode"),' will always be "01" (0x3031) which is the publisherCode for Nintendo.'),(0,r.kt)("p",null,"These bytes are available at address 0x80000004 which is where they are copied from when creating the DirectoryEntry."),(0,r.kt)("h3",{id:"padding_06"},"padding_06"),(0,r.kt)("p",null,"Unused byte which is always 0xff under normal conditions.",(0,r.kt)("br",null),"\nSee ",(0,r.kt)(l.Z,{to:"#why-0xff",mdxType:"Link"},"Why is the padding 0xff?")," for more info."),(0,r.kt)("h3",{id:"imageflags"},"imageFlags"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"imageFlags")," is always 0x05 under normal conditions."),(0,r.kt)("p",null,"The image flags are the least significant 3 bits of the byte at offset 0x07. Bits 0 and 1 are used to indicate the banner format:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"bannerFormat"),(0,r.kt)("th",{parentName:"tr",align:null},"Region"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"No banner")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"8 bits per pixel, 16 bits per palette entry in RGB5A3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"Direct color, 16 bits per pixel in RGB5A3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"11"),(0,r.kt)("td",{parentName:"tr",align:null},"No banner")))),(0,r.kt)("p",null,"For TP, this value will always be 01, meaning the banner's palette data immediately follows its pixel data."),(0,r.kt)("p",null,"The third bit (bit 2) indicates the icon animation order."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"iconAnimPattern"),(0,r.kt)("th",{parentName:"tr",align:null},"Region"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"Loop (abcabcabc)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Bounce (abcbabcba)")))),(0,r.kt)("p",null,"For TP, this value will always be 1."),(0,r.kt)("p",null,"Putting these values on top of a 0x00 byte, we get 0b00000101 or 0x05."),(0,r.kt)("h3",{id:"filename"},"filename"),(0,r.kt)("p",null,'The filename for a TP save file is always "gczelda2", which is likely short for "Gamecube Zelda 2".'),(0,r.kt)("p",null,"There are 0x20 bytes allocated for the filename, and under normal conditions any leftover bytes are set to 0x00."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},'"gczelda" (without the 2 on the end) is the filename for The Legend of Zelda: The Wind Waker save data.')),(0,r.kt)("h3",{id:"lastmodified"},"lastModified"),(0,r.kt)("p",null,"This is the last time the file which the DirectoryEntry points to was modified. This value is stored as the number of seconds since 2000/01/01 00:00."),(0,r.kt)("p",null,"This value is calculated by dividing the OSTicks returned from ",(0,r.kt)("inlineCode",{parentName:"p"},"OSGetTime")," by 40,500,000 (OSTicks per second) then taking the lower 32 bits of the 64 bit result."),(0,r.kt)(i.Z,{useSeconds:!0,sourceName:"LastModified",mdxType:"TimestampConverter"}),(0,r.kt)("h3",{id:"imagedataoffset"},"imageDataOffset"),(0,r.kt)("p",null,"Offset to the image data (banner and icons) relative to the start of the file."),(0,r.kt)("p",null,"For TP this value is always 0 (the banner data starts at the very front of the first block)."),(0,r.kt)("h3",{id:"iconformats"},"iconFormats"),(0,r.kt)("p",null,"The icon formats are stored as 8 groups of 2 bits which amounts to 2 bytes total (16 bits). Each 2-bit group indicates an icon's format as follows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"bits"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"No icon")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"CI8 with a shared color palette after the last icon's pixel data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"RGB5A3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"11"),(0,r.kt)("td",{parentName:"tr",align:null},"CI8 with its own palette following its pixel data")))),(0,r.kt)("p",null,"For TP ",(0,r.kt)("inlineCode",{parentName:"p"},"iconFormats")," will always have the value 0x0155. If we convert this to binary, we get 0b0000000101010101. Grouping by 2 bits and starting from the least-significant (right) side, we get the following:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Index"),(0,r.kt)("th",{parentName:"tr",align:null},"0"),(0,r.kt)("th",{parentName:"tr",align:null},"1"),(0,r.kt)("th",{parentName:"tr",align:null},"2"),(0,r.kt)("th",{parentName:"tr",align:null},"3"),(0,r.kt)("th",{parentName:"tr",align:null},"4"),(0,r.kt)("th",{parentName:"tr",align:null},"5"),(0,r.kt)("th",{parentName:"tr",align:null},"6"),(0,r.kt)("th",{parentName:"tr",align:null},"7"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Value"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"00")))),(0,r.kt)("p",null,"Therefore TP has 5 icons which all share palette data after the 5th icon's pixel data."),(0,r.kt)("h3",{id:"iconanimationspeeds"},"iconAnimationSpeeds"),(0,r.kt)("p",null,"The icon animation speeds are stored as 8 groups of 2 bits which amounts to 2 bytes total (16 bits). Each 2-bit group indicates how many frames an icon displays during the animation."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"bits"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"No icon")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"4 frames")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"8 frames")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"11"),(0,r.kt)("td",{parentName:"tr",align:null},"12 frames")))),(0,r.kt)("p",null,"For TP ",(0,r.kt)("inlineCode",{parentName:"p"},"iconAnimationSpeeds")," will always have the value 0x0155. If we convert this to binary, we get 0b0000000101010101. Grouping by 2 bits and starting from the least-significant (right) side, we get the following:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Index"),(0,r.kt)("th",{parentName:"tr",align:null},"0"),(0,r.kt)("th",{parentName:"tr",align:null},"1"),(0,r.kt)("th",{parentName:"tr",align:null},"2"),(0,r.kt)("th",{parentName:"tr",align:null},"3"),(0,r.kt)("th",{parentName:"tr",align:null},"4"),(0,r.kt)("th",{parentName:"tr",align:null},"5"),(0,r.kt)("th",{parentName:"tr",align:null},"6"),(0,r.kt)("th",{parentName:"tr",align:null},"7"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Value"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"01"),(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"00"),(0,r.kt)("td",{parentName:"tr",align:null},"00")))),(0,r.kt)("p",null,"Therefore TP has 5 icons which each display for 4 frames before the next one is shown in the animation."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Each icon has identical pixel and palette data. This gives the appearance of a single icon, but there are actually 5.")),(0,r.kt)("h3",{id:"permissions"},"permissions"),(0,r.kt)("p",null,"There are 3 permissions which are each 1 bit."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"bit"),(0,r.kt)("th",{parentName:"tr",align:null},"Permission"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"No move"),(0,r.kt)("td",{parentName:"tr",align:null},"File cannot be moved by the IPL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"No copy"),(0,r.kt)("td",{parentName:"tr",align:null},"File cannot be copied by the IPL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"public"),(0,r.kt)("td",{parentName:"tr",align:null},"File can be read by any game")))),(0,r.kt)("p",null,"TP never changes this value from the default 0x04 meaning public (only bit 2 is set)."),(0,r.kt)("h3",{id:"copycounter"},"copyCounter"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"copyCounter")," indicates how many times the file has been copied to a different memory card."),(0,r.kt)("p",null,"Starts at 0 and increments by 1."),(0,r.kt)("h3",{id:"firstblockindex"},"firstBlockIndex"),(0,r.kt)("p",null,"The index of the first TP save data block on the memory card. This value must always be at least 0x0005 since the first 5 blocks are used to manage the filesystem."),(0,r.kt)("p",null,"For a GCI file, the value here is unimportant since a GCI file only contains blocks for a single game, and the blocks are always in order."),(0,r.kt)("h3",{id:"numblocks"},"numBlocks"),(0,r.kt)("p",null,"The number of blocks a game uses. For TP this value is always 0x0004."),(0,r.kt)("h3",{id:"padding_38"},"padding_38"),(0,r.kt)("p",null,"Two unused bytes which are both 0xff under normal conditions.",(0,r.kt)("br",null),"\nSee ",(0,r.kt)(l.Z,{to:"#why-0xff",mdxType:"Link"},"Why is the padding 0xff?")," for more info."),(0,r.kt)("h3",{id:"commentsoffset"},"commentsOffset"),(0,r.kt)("p",null,"Offset to the comments relative to the start of the file."),(0,r.kt)("p",null,"For TP, this value will always be 0x00002400."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The 0x40 byte chunk for the comments must be contained within a single block.")),(0,r.kt)("h2",{id:"directoryentry-follow-up"},"DirectoryEntry Follow-up"),(0,r.kt)("h3",{id:"why-0xff"},"Why is the padding 0xff?"),(0,r.kt)("p",null,"Short version:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The padding bytes are set to 0xff when the memory card is formatted."),(0,r.kt)("li",{parentName:"ul"},"They are never changed after that point.")),(0,r.kt)("p",null,"Longer version:"),(0,r.kt)("p",null,"When a memory card is formatted, its Directory blocks are mostly filled with 0xff:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Offset"),(0,r.kt)("th",{parentName:"tr",align:null},"Size"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x0000"),(0,r.kt)("td",{parentName:"tr",align:null},"0x1ffa"),(0,r.kt)("td",{parentName:"tr",align:null},"0xff bytes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x1ffa"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"updateCounter")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x1ffc"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"checksum1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0x1ffe"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"checksum2")))),(0,r.kt)("p",null,"That is to say, all bytes are 0xff except the last 6."),(0,r.kt)("p",null,"Shortly after starting up the game (before the WARNING-HEALTH AND SAFETY screen shows), the two Directory blocks are read from the memory card into RAM. When you tell TP to create save data on the memory card, a portion of this RAM is overwritten with TP DirectoryEntry data which is then copied back to the memory card."),(0,r.kt)("p",null,"Within the 0x40 bytes in RAM into which the TP DirectoryEntry is written, the padding bytes are never overwritten since there is nothing which needs to be stored there. This means they maintain whatever value they had on the memory card. This value is expected to always be 0xff since the only time these bytes are modified is when the memory card is formatted."),(0,r.kt)("p",null,"However, you can manually manipulate the memory card beforehand so that these bytes are a different value. When you create a save file, you will see that the padding bytes are not modified from whatever value they had."),(0,r.kt)("p",null,"Below is a memory card raw image you can download which has had its first DirectoryEntry slot filled with 0xaa (other than the first byte which needs to be 0xff):"),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:"/saveData/raw/mem59_dirEntryAaBytes.USA.raw"},"Download mem59_dirEntryAaBytes.USA.raw")),(0,r.kt)("p",null,"If you create TP save data on a memory card with that image, you will see that the padding bytes never change from 0xaa."),(0,r.kt)("p",null,"Note that this applies to the padding at offset 0x06 and at offset 0x3a."),(0,r.kt)("h3",{id:"thoughts-on-lastmodified"},"Thoughts on lastModified"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A time of 2136/02/07 06:28:15 would give 0xffffffff seconds after 2000/01/01 00:00. I think the only way to get your Gamecube's date this high is to set it to 2099 and wait 30+ years. Even then, it is possible that the OSTick count returned from OSGetTime is based on a fixed clock and is not adjusted with any changes you make in the IPL (this could be tested). In any case, the clock battery would probably die before this became an issue."),(0,r.kt)("li",{parentName:"ul"},"The 64 bit OSTicks count wouldn't get its sign bit set until around Sep 18, 9216 at 15:12:36.908044, so this is not worth thinking about.")),(0,r.kt)("h3",{id:"checkcardstat"},"CheckCardStat"),(0,r.kt)("p",null,"When restoring data from the memory card, one of the things TP does is run a function called ",(0,r.kt)("inlineCode",{parentName:"p"},"m_Do_MemCardRWmng::mDoMemCdRWm_CheckCardStat"),". This runs a few checks on the loaded DirectoryEntry data. If any of these fail it is considered a fatal error, and the game will act as if you don't have any save data on the memory card (meaning it will ask you to create save data)."),(0,r.kt)("p",null,"Here are the checks which must always pass:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"imageDataOffset is 0x00000000"),(0,r.kt)("li",{parentName:"ul"},"commentsOffset is 0x00002400"),(0,r.kt)("li",{parentName:"ul"},"imageFlags: the least signficant 3 bits are 0b101"),(0,r.kt)("li",{parentName:"ul"},"iconFormats is 0x0155"),(0,r.kt)("li",{parentName:"ul"},"iconAnimationSpeeds is 0x0155")),(0,r.kt)("h3",{id:"room-for-custom-data"},"Room for custom data?"),(0,r.kt)("p",null,"As discussed in ",(0,r.kt)(l.Z,{to:"#why-0xff",mdxType:"Link"},"Why is the padding 0xff?"),", we can manipulate the padding bytes to any value and their value will persist between saves. Are there any other places like this in the DirectoryEntry?"),(0,r.kt)("p",null,"In ",(0,r.kt)(l.Z,{to:"#checkcardstat",mdxType:"Link"},"CheckCardStat"),", we determined some things which we can't change without upsetting the game. Skipping over those and the padding, we are left with the following:"),(0,r.kt)("p",null,"gameCode, publisherCode, upper 5 bits of imageFlags, filename, lastModified, certain permissions bits, copyCounter, firstBlockIndex, numBlocks"),(0,r.kt)("h4",{id:"gamecode-publishercode-filename"},"gameCode, publisherCode, filename"),(0,r.kt)("p",null,"gameCode, publisherCode, and the filename contents up to and including the first 0x00 byte are used to locate the TP save file on the memory card, so these cannot be changed."),(0,r.kt)("p",null,"However, since the filename string comparison stops when it hits the first null byte, we can put whatever we want in the remaining 0x17 bytes."),(0,r.kt)("h4",{id:"imageflags-1"},"imageFlags"),(0,r.kt)("p",null,"After the very first write, the DirectoryEntry looks like the following:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"47 5A 32 45 30 31 FF 00 67 63 7A 65 6C 64 61 32"),(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"),(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"00 00 00 00 00 00 00 00 28 69 BB 43 FF FF FF FF"),(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"00 00 00 01 04 00 00 05 00 04 FF FF FF FF FF FF")),(0,r.kt)("p",null,"Most of the values are filled with defaults. This is quickly overwritten with TP-specific values:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"47 5A 32 45 30 31 FF 05 67 63 7A 65 6C 64 61 32"),(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"),(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"00 00 00 00 00 00 00 00 28 69 BB 43 00 00 00 00"),(0,r.kt)("br",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"01 55 01 55 04 00 00 05 00 04 FF FF 00 00 24 00")),(0,r.kt)("p",null,"Initially, the imageFlags byte (offset 0x07) is set to its default value of 0. It is during the 2nd write that TP fills in the 3 important bits."),(0,r.kt)("p",null,"We know that the least significant 3 bits must be 0b101 for TP to accept the save file as valid. However, the top 5 bits are never checked, and they are only overwritten when they are initialized to 0. This means that we can set those 5 bits to whatever we want and they will maintain their value."),(0,r.kt)("h4",{id:"lastmodified-1"},"lastModified"),(0,r.kt)("p",null,"lastModified gets updated every time the save file is updated, so any data you put here will be lost."),(0,r.kt)("h4",{id:"permissions-1"},"permissions"),(0,r.kt)("p",null,"permissions is set to 0x04 (public) during the initial DirectoryEntry creation. For TP, the permissions are never changed after this point. Since only 3 of the bits on the permissions byte carry any meaning, we can do as we please with the other 5 bits."),(0,r.kt)("h4",{id:"copycounter-1"},"copyCounter"),(0,r.kt)("p",null,"This is incremented when copying between memory cards, so there is not much point in putting anything here."),(0,r.kt)("h4",{id:"firstblockindex-numblocks"},"firstBlockIndex, numBlocks"),(0,r.kt)("p",null,"These are critical metadata which must not be changed."),(0,r.kt)("p",null,"For a GCI file, firstBlockIndex is irrelevant so it can be changed, but its value will be lost if it gets imported to a memory card."),(0,r.kt)("h4",{id:"summary"},"Summary"),(0,r.kt)("p",null,"We can put whatever data we want at the following locations with no adverse effects:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"padding_06 which is 1 byte"),(0,r.kt)("li",{parentName:"ul"},"Unused 5 bits in imageFlags"),(0,r.kt)("li",{parentName:"ul"},"0x17 (23 decimal) bytes following the filename's null termination byte"),(0,r.kt)("li",{parentName:"ul"},"Unused 5 bits in permissions"),(0,r.kt)("li",{parentName:"ul"},"padding_3a which is 2 bytes")),(0,r.kt)("p",null,"These gives us a total of 26 bytes and 10 bits."),(0,r.kt)("p",null,"Below is a memory card raw image which has had these locations in the DirectoryEntry modified. TP will recognize the save file and everything will behave normally from a memory card perspective. The custom data in the DirectoryEntry will be maintained even if you save the game."),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:"/saveData/raw/mem59_tpCustomDataDirEntry.raw"},"Download mem59_tpCustomDataDirEntry.raw")),(0,r.kt)("p",null,"Note that you will lose some of the data if you transfer the TP save file between memory cards using the Gamecube IPL:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Padding bytes are not copied."),(0,r.kt)("li",{parentName:"ul"},"Any bytes in the filename after the null termination byte are lost.")),(0,r.kt)("h2",{id:"other-formats"},"Other Formats"),(0,r.kt)("h3",{id:"gcis"},"GCIs"),(0,r.kt)("p",null,"You can think of a GCI as a portable version of a game's data on a memory card."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A Twilight Princess GCI file is 0x8040 bytes long and is simply the DirectoryEntry (0x40 bytes) followed by the 4 Blocks (0x8000 bytes)."),(0,r.kt)("li",{parentName:"ul"},"The value of the DirectoryEntry's firstBlockIndex is not important in a GCI file.")),(0,r.kt)("h3",{id:"wii"},"Wii"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TBD")),(0,r.kt)("h3",{id:"nvidia-shield"},"Nvidia Shield"),(0,r.kt)("p",null,"The Shield's save data is 0x4000 bytes long. It is composed of Blocks 3 and 4, which are the Quest Log data block and its backup."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The Header blocks are not important since their only purpose is to provide banner, icon, and comments data to the Gamecube IPL."),(0,r.kt)("li",{parentName:"ul"},"The DirectoryEntry is not important since it only provides metadata about the Header blocks and other values which are specific to the memory card (such as firstBlockIndex).")),(0,r.kt)("h2",{id:"closing-thoughts"},"Closing Thoughts"),(0,r.kt)("p",null,"Here we only covered as much as was necessary to talk about the memory card in the context of TP. If you would like to read more about the structure of data on the memory card, check out these links:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"http://hitmen.c02.at/files/yagcd/yagcd/chap12.html",mdxType:"Link"},"Yet Another Gamecube Documentation (YAGCD) Ch. 12")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"https://github.com/dolphin-emu/dolphin/blob/5513d5f4f732fb1e436765ab87e7d60ba02b1ad6/Source/Core/Core/HW/GCMemcard/GCMemcard.h",mdxType:"Link"},"GCMemcard.h in Dolphin")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"https://github.com/devkitPro/libogc/blob/master/gc/ogc/card.h",mdxType:"Link"},"libogc/card.h"))),(0,r.kt)("p",null,"Note that YAGCD is wrong about ",(0,r.kt)("inlineCode",{parentName:"p"},"imageFlags")," in the DirectoryEntry, so be sure to check the Dolphin source code for that one."),(0,r.kt)("h3",{id:"why-5-identical-icons"},"Why 5 identical icons?"),(0,r.kt)("p",null,"You might have noticed that 87% of block 2 is unused and that we could easily fit the Header on a single block if we did not store 5 copies of the same icon pixel data."),(0,r.kt)("p",null,"In short, the Header could have been a single block making the game 3 total blocks instead of 4. An animated icon was probably planned at some point but never came to fruition. Below is the detailed explanation."),(0,r.kt)("p",null,"Icon metadata for some games which do not have an animated icon:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Game"),(0,r.kt)("th",{parentName:"tr",align:null},"iconFormats"),(0,r.kt)("th",{parentName:"tr",align:null},"iconAnimationSpeeds"),(0,r.kt)("th",{parentName:"tr",align:null},"iconAnimPattern bit"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Metroid Prime"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0001"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Resident Evil 0"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Resident Evil 4"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0001"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0003"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Super Smash Bros. Melee"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0001"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0003"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Tales of Symphonia"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0002"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0003"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"The Legend of Zelda: Four Swords Adventures"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0001"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0003"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"The Legend of Zelda: The Wind Waker"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0001"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0003"),(0,r.kt)("td",{parentName:"tr",align:null},"0")))),(0,r.kt)("p",null,"All of these games indicate that they have a single icon in the ",(0,r.kt)("inlineCode",{parentName:"p"},"iconFormats")," field."),(0,r.kt)("p",null,"Icon metadata for some games with an animated icon:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Game"),(0,r.kt)("th",{parentName:"tr",align:null},"iconFormats"),(0,r.kt)("th",{parentName:"tr",align:null},"iconAnimationSpeeds"),(0,r.kt)("th",{parentName:"tr",align:null},"iconAnimPattern bit"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Fire Emblem: Path of Radiance"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0015"),(0,r.kt)("td",{parentName:"tr",align:null},"0x003b"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Kirby Air Ride"),(0,r.kt)("td",{parentName:"tr",align:null},"0x5555"),(0,r.kt)("td",{parentName:"tr",align:null},"0xef55"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Luigi's Mansion"),(0,r.kt)("td",{parentName:"tr",align:null},"0x4041"),(0,r.kt)("td",{parentName:"tr",align:null},"0xffff"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Mario Kart: Double Dash!!"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0015"),(0,r.kt)("td",{parentName:"tr",align:null},"0x002a"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Sonic Adventure 2 Battle"),(0,r.kt)("td",{parentName:"tr",align:null},"0x000a"),(0,r.kt)("td",{parentName:"tr",align:null},"0x000f"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Soulcalibur II"),(0,r.kt)("td",{parentName:"tr",align:null},"0x5555"),(0,r.kt)("td",{parentName:"tr",align:null},"0xaaaf"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Super Mario Sunshine"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0005"),(0,r.kt)("td",{parentName:"tr",align:null},"0x000f"),(0,r.kt)("td",{parentName:"tr",align:null},"0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"The Legend of Zelda: Ocarina of Time Master Quest"),(0,r.kt)("td",{parentName:"tr",align:null},"0x002a"),(0,r.kt)("td",{parentName:"tr",align:null},"0x002a"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"The Legend of Zelda: Twilight Princess"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0155"),(0,r.kt)("td",{parentName:"tr",align:null},"0x0155"),(0,r.kt)("td",{parentName:"tr",align:null},"1")))),(0,r.kt)("p",null,"These games which have animated icons indicate multiple icons in their ",(0,r.kt)("inlineCode",{parentName:"p"},"iconFormats")," field. It it clear that Twilight Princess's icon metadata (bottom row of table) matches the pattern of the animated icons."),(0,r.kt)("p",null,"Another other important thing to note is that The Wind Waker only has a single icon, and its metadata lines up with what you would expect (see the bottom row of the first table). It would not make sense for the developers to take something which was already working and make it worse for no reason."),(0,r.kt)("p",null,"Additionally, an animated icon is the only valid use case for storing multiple icons in a file on the memory card."),(0,r.kt)("p",null,"For these reasons, I think it is pretty evident that the developers had plans for an animated icon. I suspect that they either ran out of time or decided against it, and they never went back to update the code. Either way, what we end up with is a game with save data which takes 4 blocks when it could have easily taken 3."),(0,r.kt)("p",null,"Below is a modified memory card which contains TP data which has been adjusted to take only 3 blocks. You can download it and view it in a Gamecube IPL or Dolphin's Memory Card Manager to see that it only uses 3 blocks yet provides the same icon, banner, and comments metadata. If you inspect it in a hex editor, you will see that it contains the 2 Quest Log blocks as well."),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:"/saveData/raw/mem59_tp3Blocks.USA.raw"},"Download mem59_tp3Blocks.USA.raw")),(0,r.kt)("p",null,"Note that the data will not work with the Twilight Princess game since TP expects its save data to be 4 blocks, and it verifies that the metadata (DirectoryEntry) matches certain values. The above file is just to demonstrate that the Header blocks (which exist purely for the IPL's sake) could have been a single block and been functionally indistinguishable from the normal 2 block header."),(0,r.kt)("p",null,"For your convenience, below is an image of what this would look like. The image is taken from a Gamecube IPL running in Dolphin."),(0,r.kt)("img",{src:a(4159).Z,alt:"zelda2_gc_banner.bti"}),(0,r.kt)("h3",{id:"default-selection-on-the-file-select-screen"},"Default selection on the file select screen?"),(0,r.kt)("p",null,"You might expect there to be some metadata outside of the quest log data which indicates the quest log to default to on the file select screen, but this is not the case."),(0,r.kt)("p",null,"The default is picked this way:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"From the set which includes Quest Log 1 and any other Quest Logs which pass their checksum test, pick the Quest Log which has the latest timestamp (compared at the seconds level)."),(0,r.kt)("li",{parentName:"ul"},"In the case of a tie, Quest Log 1 has the highest priority and Quest Log 3 has the lowest priority.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},'Quest Logs which fail their checksum test say "This Quest Log is corrupted."')),(0,r.kt)("h2",{id:"naming"},"Naming"),(0,r.kt)("h3",{id:"general"},"General"),(0,r.kt)("p",null,"Names on this page were decided in this way:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Pick the best name from a group of memory card references."),(0,r.kt)("li",{parentName:"ol"},"Make adjustments with clarity, accuracy, and styling in mind.")),(0,r.kt)("p",null,"Some examples:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'publisherCode is called makercode in some of the references, but it was changed here since publisher is more accurate. Using an example from YAGCD, Retro Studios developed Metroid Prime, but the publisherCode is still "01" for Nintendo.'),(0,r.kt)("li",{parentName:"ul"},'"animation speed" was changed to "iconAnimationSpeeds" so you can quickly tell that it relates to icons and that the field stores multiple speeds.')),(0,r.kt)("h3",{id:"directoryentry-2"},"DirectoryEntry"),(0,r.kt)("p",null,"This DirectoryEntry data is written as an entry on the Directory Block, hence the name DirectoryEntry.\nWe are using this name for a couple of reasons:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Variations of \"directory entry\" (such as 'DEntry' and '","_","card_direntry') are what you will see in other places."),(0,r.kt)("li",{parentName:"ul"},"We can afford to be more descriptive with the name since this is only documentation and not source code.")),(0,r.kt)("p",null,"The OS functions ",(0,r.kt)("inlineCode",{parentName:"p"},"CARDGetStatus")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"CARDSetStatus")," handle reading and writing data to the DirectoryEntry through a similar object structure which might have been called ",(0,r.kt)("inlineCode",{parentName:"p"},"CARDStat"),". libogc calls the structure ",(0,r.kt)("inlineCode",{parentName:"p"},"_card_stat"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"frameworkF.map")," mentions these functions as coming from ",(0,r.kt)("inlineCode",{parentName:"p"},"CARDStat.o"),"."),(0,r.kt)("p",null,"TP also has funtions ",(0,r.kt)("inlineCode",{parentName:"p"},"m_Do_MemCardRWmng::mDoMemCdRWm_SetCardStat")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"m_Do_MemCardRWmng::mDoMemCdRWm_CheckCardStat")," which call the OS functions internally."),(0,r.kt)("p",null,"These function names bring to mind the Linux command ",(0,r.kt)("inlineCode",{parentName:"p"},"stat"),' which is said to "display file or file system status". The data in this 0x40 byte chunk is essentially what you would see if you could run that command on a memory card (metadata about a file stored in the filesystem).'),(0,r.kt)("p",null,'The term "Directory Block" is supported by the OS function ',(0,r.kt)("inlineCode",{parentName:"p"},"card::__CARDGetDirBlock"),"."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"http://hitmen.c02.at/files/yagcd/yagcd/chap12.html",mdxType:"Link"},"Yet Another Gamecube Documentation (YAGCD) Ch. 12")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"https://github.com/dolphin-emu/dolphin/blob/5513d5f4f732fb1e436765ab87e7d60ba02b1ad6/Source/Core/Core/HW/GCMemcard/GCMemcard.h",mdxType:"Link"},"GCMemcard.h in Dolphin")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"https://github.com/devkitPro/libogc/blob/master/gc/ogc/card.h",mdxType:"Link"},"libogc/card.h")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"https://wiki.dolphin-emu.org/index.php?title=GameIDs",mdxType:"Link"},"GameIDs - Dolphin Emulator Wiki")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(l.Z,{to:"https://github.com/suloku/gcmm/blob/master/source/gci.h",mdxType:"Link"},"gci.h in gcmm"))))}p.isMDXComponent=!0},4159:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/gcIplTp3Blocks-02962eb35d533393ea987bc7f9b4aa40.png"},3987:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/gcIplTpNormal-968771239f75a15e80424ce0ac319d83.png"},5449:(t,e,a)=>{a.d(e,{Z:()=>n});const n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAgCAYAAADtwH1UAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TtVIqDlYQccjQdrIgKuIoVSyChdJWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIm5uToouU+L+k0CLWg+N+vLv3uHsHCI0KU82eCUDVLCMVj4nZ3Kroe0Uf/BhGGBGJmXoivZhB1/F1Dw9f76I8q/u5P8eAkjcZ4BGJ55huWMQbxDObls55nzjISpJCfE48btAFiR+5Lrv8xrnosMAzg0YmNU8cJBaLHSx3MCsZKvE0cUhRNcoXsi4rnLc4q5Uaa92TvzCQ11bSXKc5hjiWkEASImTUUEYFFqK0aqSYSNF+rIt/1PEnySWTqwxGjgVUoUJy/OB/8LtbszA16SYFYkDvi21/hAHfLtCs2/b3sW03TwDvM3Cltf3VBjD7SXq9rYWOgMFt4OK6rcl7wOUOMPKkS4bkSF6aQqEAvJ/RN+WAoVvAv+b21trH6QOQoa6Wb4CDQyBSpOz1Lu/u7+zt3zOt/n4ApHFyu/pbR+cAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQflBgoVJgXD+SNlAAAPgUlEQVRo3tWaPYgkSXaAv1v1ipcwKyJAAxnGCkJoBdmggyqvyzhBGTJ64QQ93o455py350mGjDtv1xDcymtzFmTsGoIpQ0Y5B9XGQZXXadxBHOxCJNxChO4G8hktTkb+VFZ19fzsGZISsjsrM+LFey/ef7wfAH/k6BJAOX2J7J/1oUGvuYb5p+aKfD+YA868w/w/Za13gTGw66FhZwCffHLBYu7Z1Q1tailsAW1LqwOzFAWMEYphZlHQtu0eer9r2i9lRWin36CbW3QQhrkF0LJfZwpPEBRFegCKonrIbJFurXs4TS/dc2NYr+jHataDIWaANcE59mOGdaX7c0CvSMeb9jVrDZe1BSEkVqtdtwFFURBjQ4yJlDLEgSEtQjEik9IhMQfPR1fUE2P0aKweiohOiHztdbRufFuRPbX+0XrpFE16hL+eAClvt761cO4r8HavASklUoK6DqR0rCz5e6lnVuVt8Xqd/sqfBuH/3GWzICYivaadjfZYM22rqOqBnR8k811ssDHCJ372bs7ihHMJsWY3mXvKN8kDyvF9/Yi+w7c32Xc5oUBtO7zQ/QaIdH+KQvZ2eALFANZ1shhjZ4ePKZ8iuDz3/Kx12BCOth90cdk9l4tu3seLgyHmoiTfNOjLDb/4/Ck1erCWvI0gfA8mH1vI43HyJub2/si77ktMOsrdFGZRSC9rEw3YLz6R/h7yuTeUTsi5W2B5adntErfbhqJ3tMVE/kTgJ8ZTrLcjAS9MJik0QLtZ4YyB2w2CI+9WVN7w9OlPO9N10wCwuflnPlcF83opP5BC3SuSiIzBwylplV7yRkc5DQIG8gWKk6vv51kgqbKYlczmBSF0znY+gxDgNjQHjkIECjmKgqzt3gQj2DHKgcWFp1Ul5w5oTrBaBS4vPSJQbzO2OESvqmaUE6/4C8l8MTAig2iNHinGV1fP0Zeb8Xe7viYpfHpxhT1/QMGnvqrHX4zrWJQjL9Zr5osLKmvvT03KLgfqEAfFRFGezi+oqnM0xxH+i3pLVkXGTZQjrVEW85KqsqxWEWcEKSA0UPoC7ys2N+HA0kpxtAEp6cGuKFBVBoAmtqReMryzGFt0m7CsCHW+F1hcVnPYRG5RPjfKRnU0X/cY0So/XSyZ+yXbsGbul9BsuN6t8WJ4VikFFbRrZK0H0Y6zsNGEestiEPs2Eqzj+XZDnZR5DDyV/Ua1IbMrhKtWaVzFZuZ5UW/ookwh1IFZzFSkMfTIIYORqZof2CdBqLxj9XWN73kW435NXwpV5djVAelDCpFOmAH+DPiXHy08jz64I/9OuTtTRIQPP3zML29qODvrJNs7zh6d8dg+Qv9wh7XvI1Kgr15x9gjOBLz7kB+fX7D7jxU/1+/41pzh/BmmF58zgUfSJzACi7/6iJ+6HxG++U+Ku4z9b+XldsW/fdfwy8dn/PCbb/goN5zVd2ybyD/efcu/5u/48OwV8zvLv3/X8OIPmR/zPh/8Fv6gr/iH9a/4NiveCb/WzMsm81HxmBQi+e6OL+oGff+OR9/+jr/NvwPg12d3PHoE35J59egD/v7DH/LNbwOqd/z6Tnn1wRl/aQZfCY/O9s9/V3nef/8MbV/x0V8/hruCx/YDvsuvUL0j/OY7PvzoMXev7kDu+EAe4dxjKOBXv/qW9/ZaLBjbq4hAbhK+NCzmnieXC5oYCSHiSkerGWMcIjImQiJgEK5ffM3PtUErofTdt0IEK/vnQgQnhp9Unva2Ju22eFuxvt3weV0jlVAahbkbnXc2naXxMyE5YbCVthe2ZJQmtxQKlROcEUojOOew3uF7vQ/AdcyD1WKhgo+dRBtgOb+axgyci9C2OuI90DCodJegWlrtzG8IkSZGnlwuWCwqXGlomnTkyPah5XvHbrroHUxKmdI5UlJaVaQQNGdertZYZ3CuJMTYIQPYQmjaQK2BsuoYcOjADmPbS3dOuYVdvaEq54Ttml+EHckL3nZEigjJKPTqKlZwVrgxSkjpgWi2Y44UHU5Dptb0fsygJCds0DG7nmkXxThnQDIxbLtNBco8MTfF/rZFtxk5RpwrsU548dXXXSBihVa156GlTZliIuSDwO7zgKTgBM3DQkLpHE1OGCnY1bdcXi6JsSHnhDGWzeaGgkOHAoItu3faHkYN47sCKjFcxUDdtDjvAbiONU0hnBsmdYsuccEe+tzKzghNfS9HbKd+rF/f2H0JYKDPArURFrnjspXOD1Yzz5NseJmVLOAVsheKoPfgDhuhrbLerKkqC+oQsThXsl7fINL5UO89OaeD+G1IVN/rkNybH2M7oB1FihghpcxmczM6zrreoprGOYcE7z29FB3s0nZ+zFgoBZ5GR3HTYo2jFMe63rJW8GU35kBfUnfnpGSU5cWCSzPnOim7CcOb3KKZMZGUAmQIgEKcEN4Bby0gDjNonIJTQ0g1IeqgdHjtcE6qmAldIgNNgmYl1JGcuvLNZntDTmlkTiGy5+nAo2keMNo80xWTSgc5J0rv0Zw59xUp19R1HGPZaYJrDJ0BPZXYTsIkBS6Do4pKLC2VKpu85ZoG44XS3Z+rTccK74VPr57ypDG82F2zFcU5YR4hh7ZL8no1KQrBmG690UcMuEr3vjC9Zav7vFDAJAd5w05g1kc4EeVchE1PhzmRgI5BmAZSry3+vCIlpfSO2MSRtsEqGlPsNUAmdkQVcgZTWmwhxNTivcP52cjJhyoLqoffdFLGUGCmlkWEaw3EJhJS4us2k11n24/nA8Syu30rzFcvCZsXfaWvyzrL3pumEzgNVVKJD5frtN8Ii3BOJClsj5CotNvc6evBKd/nheD8DF86YkzYQjClvTdOe5PxHnTSnlNfShXBVxVNkwih4bzfwSFLHu4h9Z6WcKa/CxGs6e5BUj6OBtskFssl/mLBVzl3psd1EnsMDyD2svFVzixDw3XqsmpvhQp7r9TRiSIowhVPCL2ED9oxLNAqWO8OFNdYJaLMXcncucl7QXJnvgYhaXMXnDwkibGJnJ87Qgw0TcK5iqwyGTKpBRljO2cVQLDU20DpbVcLbwKgGHMo/SKnNWD4lvJhWv8cj4nKLYrbBHYa+RKlrGRUa9XDAxvtM9BYwE7BWSEZIaqyRCAkdlH52Ak61FeS0KLMpHPudcqoM/uadV/IKk7hHyM5KUsUUOqkmF7DvAgxKaWXk3TvSyAQY93h3wqldxQI9W2NsXY8/Riqoe9N1QGx5BwpnaUohBAiVVUxmy3IWWjiXgKmd8575k9/D7dHsBFe5EAwgpK4pou8nBWU/ZwprCFMBHDSVRDVQnAwd47myO6kXkQ1K94uyWF7AEyTdlIMGDoJz1nJSTv4WVkDn6nyPGbqCa+dQI4nTOzJ2zCbLZjNO0siBZTOkVMLhTvAeUzEcgJrHSmBdZ1iXizm+xLD5XKUhlM2/5T9Hnb6aXTc5kDwnoVYvsqZDUppTs8ZYKUEKQliOrPf9qHJzBtmQ1RhzRh+ZunkS4zgk9I2nf1paz2Cr3g3x6eIMUItUPW01argBVcJld3XxoZ8IKdOSO4JymQDLi+Xe79X+S4YcKYvVlpy2vvd8TwgdbEBhQj1tqaaVzQ5sd3sOglwJd5bttvQq29vklpleghY0JmAAe5TP0fiLTcoP5l56t2G66zYPtnSdh/CtmPos880sUrIeyJjzMz63CH25xiKIfQ1HxUocFgN1EcaElBEwVcXVLbkdh0JWblV5dJ5wjYQgZl0PiwpVH3hxzuhTJmY7wV8Y8LZoszPK1arNSF2O7aYVUghHd8ecsL7+nTLctlJ/Wa9gxasK3lydUlKGVf6sXKqrfaMkz57lpH5A0ILN+MqCmvNLP0MQuSz1FFQlnLyzK4Y7bMyLWS6yvDsyRXPLp/xsa8IPQF+MUMmHFnYkk+tIWkX0YgxFDM/qdZWfDpfcn67ImTl85RZVBe4mKiHAKNnZmPkAPa5CAYO6J1m+7YwuNKRUubp1RLnyo6Xm5oCZblc9KlNRplqQH8WkKKSYsY4B0UiNhnvHSknFAHtji73Tmdfb98fpHfaJGJ4KpZws8HMPF6V61hTKzi3r9XL0Zmw9qfuz5ZPcRrZxogFqqxUMUAMxF73Z05w1TnrPtSxwFIUjXEMAp59vCDFSOqz3mVM7F58wZdJuQUun1zxRJTbVU2l8NwZ1qpYZ/hk8Yzm5ZqcduCESoRLhRcKQfcHRadODFJOVN4SQsI5gzGW29AVnZyVUd9/APzxk6sZhcB2VzOfeWLTGSQjBaotIWR8Zbqy66o+fbB99Or5csnly8BKAwtfsQk1n/UHLLaQ+0dQfYdBaQw/e/Kc9faGL9ZrRDk4NDn4/6a+EJH+tGpSku6zYaXLvEtb0oTm3tFqVXmiQqhDVyPTo2q0kzGpG0hRVa4uLwihoa7jWJ7W1GXl3lk228hi7kkJvvx6t8+EW+1i5+0usLz0hJDQ3KItzGYOa4XVqt7XQo75N9pxZelmXN3CTiMGQwyBF1lpBMq+nDE6jnZv3+eV558+/gTdrPh8tWM4BRmTuVHDBlehp8PhvYdiOIKdSqsZfRXUsRnNzkCUCGxCODx6NRxou0zxL/Zbs1rtuLx0iDia3CJA6QqcF1arANrT3wMeNQCB3a7riiiA2dwgfbrcNC23t804qWDP7KkNbFFsYfjs4iny5YvOLJTCViFUC9zcn5DSPCmyleT116xuA9dZKXtn+L95tYe1wZPfjzUTlPPzkrIs+iJgy26bO/5Yw6z3SV9+uZv4AB2NMC2w3jQHSYZM7E07kbSxMan/feWX+PV6zHtSo3hgEWqGtDT3B9fJHYaG675ksJmYjHTUFfG2LT+841g9cdB+aiNOjZ2OGb5tt829pFUOJhy1pagqqe0SFZn25cj9us7DvVLCrl6xyocjs4Bp8t6M9CY316eJzAd29e1bTt6lJUXf8O5d1zrwBScGj+/bTM57CH0pQlA1FEV62KfJ20nYWg/bSAbEohx2G7ypeWSa2v9/uOQNWipjR6f0Na+JBhRFgbUFMWaMae+nGEc9U8K0F3RvCUUebgF8sKHqgY4n1fswlUmr5GtsTidE+/kHOD8w7qES+nRdPfIK8jYCNS3H9+a88pbeIHQb0LYtvrTM5x5Nkw0o7rue3//+v37zF+//+d9Mv00bbQ/mtu1hM67SNf4ytIhNxh0FFCOZxX780Oh68HwM66SnPPre43XcIFycwJsTzb7TsW3bHjQdPzi3hyu2qza0/ZHqD5i0p8sbJOvBZlw9+nyicfdkFfUtmmVf1wD8J3thPdWs9YCXlfvaPC3Lv5WH173GDPz4H1J7U2l5YjlTAAAAAElFTkSuQmCC"},9224:(t,e,a)=>{a.d(e,{Z:()=>n});const n="data:image/png;base64,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"}}]);